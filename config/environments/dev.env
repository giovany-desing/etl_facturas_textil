# ========== ENVIRONMENT CONFIGURATION ==========
# Desarrollo - Configuraci√≥n para ambiente local/desarrollo
# Usar LocalStack para simular AWS localmente

# ========== GENERAL ==========
ENV=dev
DEBUG=True
LOG_LEVEL=DEBUG

# ========== AWS CONFIGURATION ==========
AWS_REGION=us-east-1
AWS_ACCOUNT_ID=123456789012
# Nota: En desarrollo, usar credenciales de AWS o LocalStack
AWS_ENDPOINT_URL=http://localhost:4566  # LocalStack endpoint

# ========== ECS CONFIGURATION ==========
ECS_CLUSTER_NAME=etl-facturas-cluster-dev
ECS_TASK_DEFINITION_FASTAPI=fastapi-service-dev
ECS_TASK_DEFINITION_TRAINING=model-training-dev
ECS_TASK_DEFINITION_MLFLOW=mlflow-server-dev
ECS_SUBNETS=subnet-dev-xxx,subnet-dev-yyy
ECS_SECURITY_GROUPS=sg-dev-xxx
ECS_EXECUTION_ROLE_ARN=arn:aws:iam::123456789012:role/ecsTaskExecutionRole-dev
ECS_TASK_ROLE_ARN=arn:aws:iam::123456789012:role/ecsTaskRole-dev

# ========== S3 BUCKETS ==========
S3_BUCKET_FACTURAS=mes-en-curso-dev
S3_BUCKET_MODELOS=textil-modelos-dev
S3_BUCKET_MLFLOW=textil-mlflow-artifacts-dev
S3_BUCKET_DRIFT_DATA=textil-drift-data-dev

# ========== DATABASE ==========
# En desarrollo, usar MySQL local o RDS dev
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_DATABASE=textil_dev
MYSQL_USER=root
# MYSQL_PASSWORD se obtiene de Secrets Manager o .env local

# ========== MLFLOW ==========
MLFLOW_TRACKING_URI=http://localhost:5001
MLFLOW_BACKEND_STORE_URI=sqlite:///mlflow.db
MLFLOW_ARTIFACT_ROOT=./mlflow-artifacts

# ========== CLOUDWATCH ==========
CLOUDWATCH_LOG_GROUP_FASTAPI=/ecs/facturas-etl-dev
CLOUDWATCH_LOG_GROUP_TRAINING=/ecs/model-training-dev
CLOUDWATCH_LOG_GROUP_MLFLOW=/ecs/mlflow-dev
CLOUDWATCH_NAMESPACE=ETLFacturasDev

# ========== SECRETS MANAGER ==========
# En desarrollo, usar secrets locales o LocalStack
SECRETS_PREFIX=textil/dev
MYSQL_SECRET_NAME=textil/dev/mysql/credentials
AWS_SECRET_NAME=textil/dev/aws/credentials
GOOGLE_CREDENTIALS_SECRET_NAME=textil/dev/google/credentials
GOOGLE_TOKEN_SECRET_NAME=textil/dev/google/token
SLACK_WEBHOOK_SECRET_NAME=textil/dev/slack/webhook

# ========== MWAA ==========
MWAA_ENVIRONMENT_NAME=etl-facturas-airflow-dev
MWAA_DAG_S3_BUCKET=etl-facturas-airflow-dags-dev

# ========== APPLICATION ==========
API_HOST=0.0.0.0
API_PORT=8000
BASE_DIR=/app
MODELS_DIR=modelos
DATA_DIR=data

# ========== GOOGLE DRIVE ==========
# En desarrollo, usar credenciales locales
GOOGLE_CREDENTIALS_PATH=./credentials.json
GOOGLE_TOKEN_PATH=./token.json

# ========== TRAINING ==========
TRAIN_BATCH_SIZE=8
TRAIN_EPOCHS=10
TRAIN_VALIDATION_SPLIT=0.2

# ========== DRIFT DETECTION ==========
DRIFT_DATA_ROOT=./drift_data
DRIFT_BASELINE_PATH=./modelos/baseline_caracteristicas.npy
DRIFT_UMBRAL_P_VALUE=0.05
DRIFT_UMBRAL_STATISTIC=0.3

# ========== NOTIFICATIONS ==========
SLACK_WEBHOOK_URL=
EMAIL_FROM=noreply@textil-dev.com
EMAIL_TO=dev-team@textil.com

# ========== FEATURE FLAGS ==========
ENABLE_DRIFT_DETECTION=True
ENABLE_AUTO_RETRAINING=False
ENABLE_METRICS_EXPORT=True

