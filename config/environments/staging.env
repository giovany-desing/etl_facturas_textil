# ========== ENVIRONMENT CONFIGURATION ==========
# Staging - Configuración para ambiente de staging/pre-producción

# ========== GENERAL ==========
ENV=staging
DEBUG=False
LOG_LEVEL=INFO

# ========== AWS CONFIGURATION ==========
AWS_REGION=us-east-1
AWS_ACCOUNT_ID=123456789012
# Nota: Usar credenciales de AWS staging account

# ========== ECS CONFIGURATION ==========
ECS_CLUSTER_NAME=etl-facturas-cluster-staging
ECS_TASK_DEFINITION_FASTAPI=fastapi-service-staging
ECS_TASK_DEFINITION_TRAINING=model-training-staging
ECS_TASK_DEFINITION_MLFLOW=mlflow-server-staging
ECS_SUBNETS=subnet-staging-xxx,subnet-staging-yyy
ECS_SECURITY_GROUPS=sg-staging-xxx
ECS_EXECUTION_ROLE_ARN=arn:aws:iam::123456789012:role/ecsTaskExecutionRole-staging
ECS_TASK_ROLE_ARN=arn:aws:iam::123456789012:role/ecsTaskRole-staging

# ========== S3 BUCKETS ==========
S3_BUCKET_FACTURAS=mes-en-curso-staging
S3_BUCKET_MODELOS=textil-modelos-staging
S3_BUCKET_MLFLOW=textil-mlflow-artifacts-staging
S3_BUCKET_DRIFT_DATA=textil-drift-data-staging

# ========== DATABASE ==========
# Usar RDS de staging
MYSQL_HOST=textil-staging.cof2oucystyr.us-east-1.rds.amazonaws.com
MYSQL_PORT=3306
MYSQL_DATABASE=textil_staging
MYSQL_USER=samaca
# MYSQL_PASSWORD se obtiene de Secrets Manager

# ========== MLFLOW ==========
MLFLOW_TRACKING_URI=http://mlflow-staging.internal:5001
MLFLOW_BACKEND_STORE_URI=mysql+pymysql://samaca:MYSQL_PASSWORD@textil-staging.cof2oucystyr.us-east-1.rds.amazonaws.com:3306/mlflow_staging
MLFLOW_ARTIFACT_ROOT=s3://textil-mlflow-artifacts-staging/

# ========== CLOUDWATCH ==========
CLOUDWATCH_LOG_GROUP_FASTAPI=/ecs/facturas-etl-staging
CLOUDWATCH_LOG_GROUP_TRAINING=/ecs/model-training-staging
CLOUDWATCH_LOG_GROUP_MLFLOW=/ecs/mlflow-staging
CLOUDWATCH_NAMESPACE=ETLFacturasStaging

# ========== SECRETS MANAGER ==========
SECRETS_PREFIX=textil/staging
MYSQL_SECRET_NAME=textil/staging/mysql/credentials
AWS_SECRET_NAME=textil/staging/aws/credentials
GOOGLE_CREDENTIALS_SECRET_NAME=textil/staging/google/credentials
GOOGLE_TOKEN_SECRET_NAME=textil/staging/google/token
SLACK_WEBHOOK_SECRET_NAME=textil/staging/slack/webhook

# ========== MWAA ==========
MWAA_ENVIRONMENT_NAME=etl-facturas-airflow-staging
MWAA_DAG_S3_BUCKET=etl-facturas-airflow-dags-staging

# ========== APPLICATION ==========
API_HOST=0.0.0.0
API_PORT=8000
BASE_DIR=/app
MODELS_DIR=modelos
DATA_DIR=/data

# ========== GOOGLE DRIVE ==========
# Credenciales desde Secrets Manager
GOOGLE_CREDENTIALS_PATH=/app/credentials.json
GOOGLE_TOKEN_PATH=/app/token.json

# ========== TRAINING ==========
TRAIN_BATCH_SIZE=16
TRAIN_EPOCHS=50
TRAIN_VALIDATION_SPLIT=0.2

# ========== DRIFT DETECTION ==========
DRIFT_DATA_ROOT=/app/drift_data
DRIFT_BASELINE_PATH=/app/modelos/baseline_caracteristicas.npy
DRIFT_UMBRAL_P_VALUE=0.05
DRIFT_UMBRAL_STATISTIC=0.3

# ========== NOTIFICATIONS ==========
SLACK_WEBHOOK_URL=
EMAIL_FROM=noreply@textil-staging.com
EMAIL_TO=staging-team@textil.com

# ========== FEATURE FLAGS ==========
ENABLE_DRIFT_DETECTION=True
ENABLE_AUTO_RETRAINING=True
ENABLE_METRICS_EXPORT=True

# ========== ALB ==========
ALB_DNS_NAME=etl-facturas-staging.us-east-1.elb.amazonaws.com
ALB_TARGET_GROUP_ARN=arn:aws:elasticloadbalancing:us-east-1:123456789012:targetgroup/fastapi-staging/xxx

